# name: test/sql/types/nested/array/array_nested_rowserialization.test
# group: [array]

# Additional test for row/tuple deserialization with nested arrays and heap types
statement ok
PRAGMA enable_verification

statement ok
PRAGMA verify_external

statement ok
CREATE TABLE t1 (i VARCHAR[3])

statement ok
INSERT INTO t1 VALUES (array_value('1',NULL,'3')), (NULL), (array_value(NULL,'5','6'));

query I rowsort
SELECT DISTINCT * FROM t1 ORDER BY ALL;
----
NULL
[1, NULL, 3]
[NULL, 5, 6]

statement ok
CREATE TABLE t2(i VARCHAR[2][2])

statement ok
INSERT INTO t2 VALUES (array_value(array_value('1', NULL), array_value(NULL, '2'))), (NULL), (array_value(array_value('3', NULL), array_value(NULL, '4')));

query I rowsort
SELECT DISTINCT * FROM t2 ORDER BY ALL;
----
NULL
[[1, NULL], [NULL, 2]]
[[3, NULL], [NULL, 4]]